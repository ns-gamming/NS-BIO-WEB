You are a Replit Agent. Create a single Next.js (React) project named ff-info-frontend that is ready to be deployed to Vercel. Do not create any external backend servers or Telegram bot. Use Vercel Serverless API routes (Next.js API routes) as the only server-side code — this keeps secrets secure and meets the user's “no backend” constraint (everything is in the same repo). Do not add any database or persistent storage. Keep the project minimal, secure, and production-ready.

Must-do summary

1. Build a Next.js 14+ (or latest stable) app with React 18, TypeScript optional (JS is fine if you prefer), Tailwind CSS for styling and animations, and Framer Motion for premium animations.


2. Add a small serverless API route /api/info that acts as a secure proxy to the Free Fire Info API:

https://api.ffinfo.freefireofficial.com/api/{region}/{UID}?key={key}

The serverless route must read the secret key from an environment variable: FFINFO_API_KEY set in Vercel (or .env.local for local dev).

Do not expose keys to client code or commit them to the repo.



3. No database. No external services. No Telegram. No background workers.


4. Use the exact sample API response provided by the user (the large JSON block with basicInfo, profileInfo, clanBasicInfo, etc.) as the canonical schema the UI must expect and render. The agent should code the UI to map and show every useful field from that schema.


5. If the proxied API returns anything other than a successful payload (200 OK with the expected data), show the message: "Your limit has expired — buy VIP." to the user (for all non-success statuses or unexpected response shapes).


6. Provide a polished, responsive admin-like UI (single-page) that:

Allows users to input region and uid.

Calls /api/info and displays the full mapped player info (nickname, level, rank, rankingPoints, liked, lastLoginAt (humanized), banner/headPic images or placeholder, clan info, captain info, pet, social signature, equipped skills, outfit/clothes list).

Provides a “Download JSON” button (returns raw API JSON).

Provides a “Generate Player Card” feature implemented client-side (HTML/CSS → PNG) using an HTML canvas approach (no external node-canvas; client-side only) so it works in Vercel hosting without added build steps.

Shows clear UX states: loading, success, error, rate-limited (the “buy VIP” message).



7. Responsive and polished UI:

Mobile-first, supports all screen sizes.

Use Tailwind CSS + Framer Motion for smooth micro-interactions and transitions.

Optimize images and use lazy-loading.

Ensure UI and layout obey Adsense policies (no deceptive content, no auto-redirects, do not suggest false download or copyrighted content). Add a short line in the UI footer: “Ads shown comply with Adsense policies — contact admin for concerns.”



8. Security & deployment:

Use serverless proxy route /api/info to keep FFINFO_API_KEY secret — the client must never see keys.

Sanitize user inputs server-side and client-side (region allowlist and uid digits-only).

Add CORS and CSP headers in serverless route responses.

Rate-limit serverless route per IP (simple in-memory rate limiter with TTL, adequate for serverless environment) with default limits configurable via env:

RATE_LIMIT_PER_MIN=20 (client IP)

RATE_LIMIT_PER_UID_PER_MIN=10

If rate-limited, respond with 429 and the client will show the “buy VIP” message.


Mask all errors in client UI to avoid leaking secrets.



9. Environment file:

Include .env.example:

NEXT_PUBLIC_APP_NAME=NS Gamming - FF Info
FFINFO_API_KEY=__MASK__
RATE_LIMIT_PER_MIN=20
RATE_LIMIT_PER_UID_PER_MIN=10
CACHE_TTL_SEC=300

README must instruct: DO NOT put real keys into Git. Set FFINFO_API_KEY in Vercel Environment Variables dashboard for Production and in local .env.local only for local development.



10. Caching:

Implement simple in-memory (serverless-friendly) cache per serverless invocation using a short TTL (default 300s) to avoid hitting upstream too frequently. If serverless environment loses memory between cold starts, that's acceptable — document it in README.



11. Error handling:

If the API returns 404 for UID, show “No account found for UID X in region Y.”

For any upstream errors or unexpected shapes, show: "Your limit has expired — buy VIP."

For invalid inputs, show friendly validation messages: "Invalid UID — digits only", "Unsupported region — allowed: SG, IN, VN, BR, US, EU, etc."



12. Accessibility:

Ensure semantic HTML, keyboard navigable controls, alt text for images, and proper color contrast.



13. README:

Provide clear Vercel deployment instructions: push repo → import into Vercel → set FFINFO_API_KEY in Project Settings → deploy.

Include sample curl command to test the serverless route (using an Authorization header is not required for user flows).

Explain the “buy VIP” behavior and how to change the message.

Include troubleshooting and how to rotate the key.



14. Tests:

Add minimal unit tests (Jest or vitest) to test the mapping function that converts the raw API JSON (user’s sample) into the UI model.



15. Logging:

Do not store logs persistently. For debugging, print safe logs to stdout (no secrets).



16. Ads / Adsense:

Add a placeholder div for Adsense (with comment and instructions) and a note in README to ensure the user adds valid Adsense code. In the code comments include “Place Adsense code here — ensure compliance with policies.” Do not auto-insert real ad code.




Strict UI mapping (use the exact sample response)

Use the JSON object the user provided as the exact example for coding the mapping layer. The agent must write code that expects fields such as:

basicInfo.accountId, basicInfo.nickname, basicInfo.region, basicInfo.level, basicInfo.exp, basicInfo.bannerId, basicInfo.headPic, basicInfo.rank, basicInfo.rankingPoints, basicInfo.liked, basicInfo.lastLoginAt, basicInfo.weaponSkinShows, basicInfo.title, basicInfo.releaseVersion, basicInfo.showBrRank, basicInfo.showCsRank, basicInfo.selectOccupations, basicInfo.badgeInfo, basicInfo.primePrivilegeDetail

profileInfo.avatarId, profileInfo.clothes, profileInfo.equipedSkills, profileInfo.isSelected, etc.

clanBasicInfo.clanId, clanBasicInfo.clanName, clanBasicInfo.clanLevel, clanBasicInfo.memberNum

captainBasicInfo similar mapping as basicInfo

petInfo.id, petInfo.level, petInfo.skinId, petInfo.selectedSkillId

socialInfo.signature, socialInfo.language, socialInfo.modePrefer

diamondCostRes.diamondCost, creditScoreInfo.creditScore, outfit_data, map_codes

The UI should display all those fields in logical groupings and hide groups that are empty. For images that are numeric IDs (like headPic, avatarId, bannerId), display the numeric ID and, in admin settings, allow the user to supply a base URL mapping so numeric asset IDs can be translated to image URLs. If mapping not provided, show a placeholder avatar image and the numeric ID.


Example behavior & edge-cases

Happy path:

User inputs region=sg and uid=2405657626. Client calls /api/info?region=sg&uid=2405657626. Serverless proxy calls https://api.ffinfo.freefireofficial.com/api/sg/2405657626?key=${process.env.FFINFO_API_KEY}.

Serverless returns JSON to client mapped to UI. Show full player card and a downloadable JSON file. Show last login date formatted.


Upstream error or unexpected response:

Show "Your limit has expired — buy VIP." and log the raw upstream status internally (without secret).


404 from upstream:

Show: “No account found for UID 2405657626 in region SG.”


Rate-limit exceeded in proxy:

Return 429, client shows "Your limit has expired — buy VIP."



Files & structure (what to create)

ff-info-frontend/
├─ package.json
├─ next.config.js
├─ tailwind.config.js
├─ .env.example
├─ README.md
├─ pages/
│  ├─ index.jsx              # main UI
│  └─ api/
│     └─ info.js             # serverless proxy: reads FFINFO_API_KEY from env
├─ components/
│  ├─ PlayerCard.jsx
│  ├─ InfoPanel.jsx
│  ├─ Loader.jsx
│  └─ ErrorBanner.jsx
├─ lib/
│  ├─ mapApiResponse.js      # mapping function using the given example JSON schema
│  ├─ rateLimiter.js         # lightweight in-memory limiter
│  └─ validators.js
├─ public/
│  └─ placeholders/
├─ styles/
├─ tests/
│  └─ mapApiResponse.test.js
└─ scripts/
   └─ generate_player_card_client.js  # client-side canvas generator (invoked from browser)

Implementation details for the serverless route (/api/info)

Validate region (allowlist: SG, IN, VN, BR, US, EU, etc.) — case-insensitive but pass lowercase to API.

Validate uid — regex ^[0-9]{6,20}$.

Rate-limit per IP and per UID via in-memory map with TTL; configurable via env.

Perform fetch to the upstream URL with a short timeout (8s). If fetch timeout or non-200, return 502 or 429 accordingly (client shows VIP message).

Sanitize response and map using lib/mapApiResponse.js.

Add security headers:

Content-Security-Policy, X-Content-Type-Options, X-Frame-Options, Referrer-Policy.


Return mapped JSON: { meta: { fetchedAt, fromCache }, data: { ...mapped fields... } }


Dev / deployment notes (README must include)

How to run locally:

cp .env.example .env.local then npm install then npm run dev

Set FFINFO_API_KEY in .env.local for local testing (but DO NOT commit).


Vercel:

Import repo in Vercel → set FFINFO_API_KEY and RATE_LIMIT_* env vars in Project Settings → Deploy.


How to test:

Example curl:

curl "https://<your-deployment>/api/info?region=sg&uid=2405657626"


How to rotate FFINFO_API_KEY — update Vercel env and redeploy.

How to change the “Your limit has expired — buy VIP.” message (env var VIP_MESSAGE).

Adsense instructions: where to paste ad code and compliance reminder.


UX, animations & polish

Use Framer Motion for:

Card flip/slide when switching between Basic / Clan / Captain panes.

Smooth skeleton loader while fetching.

Micro-interactions on buttons (hover, pressed).


Make sure all animations are performant (use will-change, hardware-accelerated transforms) and disabled for prefers-reduced-motion.

Provide dark theme default in NS Gamming blue/black style and allow user toggle.


Testing & quality checks

Add unit test that verifies mapping of the provided sample JSON to UI model fields.

Linting with ESLint and Prettier config.

Ensure no secrets are printed to console and no environment variable is referenced from client-side (no NEXT_PUBLIC_FFINFO_API_KEY).


Final deliverable checklist for the agent (commit-ready)

Full Next.js repo as above.

.env.example.

README.md with Vercel steps, VIP note, and Adsense note.

Tests and code comments.

A clear comment block near /pages/api/info.js describing how to set FFINFO_API_KEY in Vercel and where to change the VIP message.